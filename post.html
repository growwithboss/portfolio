<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post | BOSS</title>
    
    <link rel="manifest" href="/portfolio/manifest.json">
const BLOG_API_URL = 'https://script.google.com/macros/s/AKfycbwWuvvdTV1KUFWmp9SKfkNsCw9wLADt6ynG-FYZYVwPgDjCjbt-Z4qhg7d8bQGPzovV/exec';
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> 
    
    <style>
        /* PASTE THE FULL <style> BLOCK FROM index.html HERE */
        /* START OF INCLUDED CSS */
        /* ... (Your full CSS, including theme variables, cursor styles, and layout) ... */
        /* Blog Post Specific Layout */
        .post-container {
            max-width: 900px;
            margin: 6rem auto 4rem;
            padding: 2rem 5%;
        }
        .post-content h1 {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }
        .post-content .post-meta {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 1rem;
        }
        /* Styles for content fetched from Markdown */
        .post-content p {
            margin-bottom: 1.5rem;
            line-height: 1.8;
            color: var(--text-secondary);
        }
        .post-content h2, .post-content h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        [data-scroll] { opacity: 0; transform: translateY(50px); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        [data-scroll].revealed { opacity: 1; transform: translateY(0); }
        /* END OF INCLUDED CSS */
    </style>
</head>
<body>
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <nav>
        <div class="nav-container">
            <div class="nav-logo">BOSS</div>
            <div>
                 <a href="index.html" class="theme-btn" style="margin-right: 1rem;">Back to Home</a>
                 <button class="theme-btn" onclick="toggleTheme()">Inverse</button>
            </div>
        </div>
    </nav>
    
    <main class="post-container">
        <div id="status-message">
            <h1 style="text-align: center; margin-top: 5rem; color: var(--text-primary);" id="loading-text">Loading Blog Post...</h1>
        </div>
        
        <div class="post-content" id="blog-post-content" style="display: none;">
        </div>
    </main>

    <script>
        const GITHUB_REPO_OWNER = 'growwithboss';
        const GITHUB_REPO_NAME = 'portfolio';

        // --- Core Utility Functions (Theme, Cursor, Observer) ---
        function toggleTheme() { /* ... (theme logic) ... */ }
        window.addEventListener('DOMContentLoaded', () => { const savedTheme = localStorage.getItem('theme') || 'dark'; document.documentElement.setAttribute('data-theme', savedTheme); loadSinglePost(); }); 
        const cursor = document.querySelector('.cursor'); const cursorFollower = document.querySelector('.cursor-follower');
        document.addEventListener('mousemove', (e) => { /* ... (cursor logic) ... */ });
        const observerOptions = { threshold: 0.15, rootMargin: '0px 0px -100px 0px' };
        const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('revealed'); } }); }, observerOptions);
        
        // --- Single Post Fetching Logic (Reads Markdown) ---

        async function loadSinglePost() {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('slug');
            const statusMessage = document.getElementById('status-message');
            const postContentDiv = document.getElementById('blog-post-content');

            if (!slug) {
                statusMessage.innerHTML = '<h1 style="color: red;">Error: No post slug provided.</h1>'; return;
            }

            try {
                const filePath = `_posts/${slug}.md`; 
                
                // Fetch the raw Markdown file content directly from GitHub's host
                const response = await fetch(`https://${GITHUB_REPO_OWNER}.github.io/${GITHUB_REPO_NAME}/${filePath}`);
                
                if (!response.ok) {
                    statusMessage.innerHTML = `<h1 style="color: red;">Error: Post file not found or wrong slug (${slug}).</h1>`; return;
                }

                const markdownText = await response.text();

                // Separate Frontmatter (metadata) from the Body content
                const parts = markdownText.split('---');
                const frontmatter = parts[1]; 
                const bodyMarkdown = parts.slice(2).join('---'); 

                // Extract metadata
                const titleMatch = frontmatter.match(/title: ["']?([^"']+)["']?/i);
                const authorMatch = frontmatter.match(/author: ["']?([^"']+)["']?/i);
                const dateMatch = frontmatter.match(/date: (.*)/i);

                const title = titleMatch ? titleMatch[1] : 'Untitled Post';
                const author = authorMatch ? authorMatch[1] : 'Unknown';
                const date = dateMatch ? new Date(dateMatch[1]).toLocaleDateString() : 'N/A';
                
                // Convert the Markdown body to HTML
                const htmlContent = marked.parse(bodyMarkdown);
                
                // Update page
                document.title = `${title} | BOSS`;
                statusMessage.style.display = 'none';
                postContentDiv.style.display = 'block';
                
                postContentDiv.innerHTML = `
                    <h1 data-scroll>${title}</h1>
                    <p class="post-meta" data-scroll>By ${author} on ${date}</p>
                    <div data-scroll>${htmlContent}</div>
                `;

                postContentDiv.querySelectorAll('[data-scroll]').forEach(el => observer.observe(el));

            } catch (error) {
                console.error('Failed to load Markdown post:', error);
                statusMessage.innerHTML = `<h1 style="color: red;">A critical error occurred while processing the content.</h1>`;
            }
        }
        window.addEventListener('load', loadSinglePost);
        document.querySelectorAll('[data-scroll]').forEach(el => observer.observe(el));
    </script>
</body>
</html>
